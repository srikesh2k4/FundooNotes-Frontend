<main class="main-content" [class.sidebar-expanded]="sidebarExpanded">
  <div class="content-wrapper">
    <app-take-note (noteCreated)="onNoteCreated()"></app-take-note>

    <!-- Search Results Header -->
    <div class="search-header" *ngIf="searchQuery">
      <span class="search-results-text">Search results for "{{ searchQuery }}"</span>
    </div>

    <!-- Loading State -->
    <div class="loading-state" *ngIf="isLoading()">
      <div class="spinner"></div>
      <p>Loading notes...</p>
    </div>

    <!-- Pinned Notes Section -->
    <section class="notes-section" *ngIf="!isLoading() && pinnedNotes().length > 0">
      <h2 class="section-title">PINNED</h2>
      <div class="notes-masonry" [class.list-view]="!isGridView">
        <app-note-card
          *ngFor="let note of pinnedNotes()"
          [note]="note"
          (noteClicked)="onNoteClick($event)"
          (noteUpdated)="onNoteUpdated()">
        </app-note-card>
      </div>
    </section>

    <!-- Other Notes Section -->
    <section class="notes-section" *ngIf="!isLoading() && otherNotes().length > 0">
      <h2 class="section-title" *ngIf="pinnedNotes().length > 0">OTHERS</h2>
      <div class="notes-masonry" [class.list-view]="!isGridView">
        <app-note-card
          *ngFor="let note of otherNotes()"
          [note]="note"
          (noteClicked)="onNoteClick($event)"
          (noteUpdated)="onNoteUpdated()">
        </app-note-card>
      </div>
    </section>

    <!-- Empty State -->
    <div class="empty-state" *ngIf="!isLoading() && pinnedNotes().length === 0 && otherNotes().length === 0">
      <svg viewBox="0 0 24 24" class="empty-icon" *ngIf="!searchQuery">
        <path d="M9 21c0 .55.45 1 1 1h4c.55 0 1-.45 1-1v-1H9v1zm3-19C8.14 2 5 5.14 5 9c0 2.38 1.19 4.47 3 5.74V17c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-2.26c1.81-1.27 3-3.36 3-5.74 0-3.86-3.14-7-7-7zm2.85 11.1l-.85.6V16h-4v-2.3l-.85-.6C7.8 12.16 7 10.63 7 9c0-2.76 2.24-5 5-5s5 2.24 5 5c0 1.63-.8 3.16-2.15 4.1z"></path>
      </svg>
      <svg viewBox="0 0 24 24" class="empty-icon" *ngIf="searchQuery">
        <path d="M20.49,19l-5.73-5.73C15.53,12.2,16,10.91,16,9.5C16,5.91,13.09,3,9.5,3S3,5.91,3,9.5C3,13.09,5.91,16,9.5,16 c1.41,0,2.7-0.47,3.77-1.24L19,20.49L20.49,19z M5,9.5C5,7.01,7.01,5,9.5,5S14,7.01,14,9.5S11.99,14,9.5,14S5,11.99,5,9.5z"></path>
      </svg>
      <p *ngIf="!searchQuery">Notes you add appear here</p>
      <p *ngIf="searchQuery">No matching notes found</p>
    </div>
  </div>
</main>

<!-- Note Edit Dialog -->
<app-note-edit-dialog
  *ngIf="showEditDialog() && selectedNote()"
  [note]="selectedNote()!"
  (close)="closeEditDialog()">
</app-note-edit-dialog>
